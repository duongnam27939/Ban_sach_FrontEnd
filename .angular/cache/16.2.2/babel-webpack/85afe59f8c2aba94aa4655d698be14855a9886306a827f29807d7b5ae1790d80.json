{"ast":null,"code":"import { __decorate } from \"tslib\";\n// product-update.component.ts\nimport { Component } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nexport let ProductUpdateComponent = class ProductUpdateComponent {\n  get checkForm() {\n    return this.productAddForm.controls;\n  }\n  constructor(fb, router, productService, route) {\n    this.fb = fb;\n    this.router = router;\n    this.productService = productService;\n    this.route = route;\n    this.productAddForm = this.fb.group({\n      name: new FormControl('', Validators.required),\n      price: new FormControl(0, Validators.required),\n      priceSale: new FormControl(0, Validators.required),\n      describe: new FormControl('', Validators.compose([Validators.required, Validators.minLength(10)])),\n      images: new FormControl('', Validators.required),\n      categoryId: new FormControl('', Validators.required),\n      status: new FormControl(true, Validators.required)\n    });\n    this.files = [];\n    this.url = [];\n    this.productService.getCategory().subscribe(response => {\n      console.log(response.data);\n      this.categorys = response.data;\n    });\n    this.router.paramMap.subscribe(params => {\n      const _id = params.get('id');\n      this.productService.getProduct(_id).subscribe(response => {\n        console.log(response);\n        this.products = response.data;\n        console.log(this.products);\n        this.cate = response.data.categoryId.name;\n        this.productAddForm.patchValue({\n          name: response.data.name,\n          price: response.data.price,\n          priceSale: response.data.priceSale,\n          describe: response.data.describe,\n          categoryId: response.data.categoryId,\n          images: response.data.images,\n          status: response.data.status\n        });\n      });\n    });\n  }\n  onSelectImage(event) {\n    this.files.push(...event.addedFiles);\n    const file_data = this.files[0];\n    const data = new FormData();\n    data.append('file', file_data);\n    data.append('upload_preset', 'upload');\n    data.append('cloud_name', 'doa7mkkpq');\n    this.productService.uploadImage(data).subscribe(response => {\n      this.url.push(response.secure_url);\n      console.log(this.url);\n    });\n  }\n  onRemovem(event) {\n    console.log(event);\n    this.files.splice(this.files.indexOf(event), 1);\n  }\n  onHandleSubmit() {\n    const products = {\n      _id: this.products._id,\n      name: this.productAddForm.value.name || '',\n      price: this.productAddForm.value.price || 0,\n      priceSale: this.productAddForm.value.priceSale || 0,\n      describe: this.productAddForm.value.describe || '',\n      categoryId: this.productAddForm.value.categoryId || '',\n      images: this.url[0] || \"\",\n      status: this.productAddForm.value.status || true\n    };\n    console.log(products._id);\n    this.productService.updateProduct(products).subscribe(data => {\n      console.log(data);\n      Swal.fire({\n        position: 'center',\n        icon: 'success',\n        title: 'Update Product success',\n        showConfirmButton: false,\n        timer: 1500\n      });\n      this.route.navigate(['/admin/product']);\n    }, error => {\n      alert('Cập nhật mục thất bại');\n    });\n  }\n};\nProductUpdateComponent = __decorate([Component({\n  selector: 'app-product-update',\n  templateUrl: './product-update.component.html',\n  styleUrls: ['./product-update.component.scss']\n})], ProductUpdateComponent);","map":{"version":3,"names":["Component","FormControl","Validators","Swal","ProductUpdateComponent","checkForm","productAddForm","controls","constructor","fb","router","productService","route","group","name","required","price","priceSale","describe","compose","minLength","images","categoryId","status","files","url","getCategory","subscribe","response","console","log","data","categorys","paramMap","params","_id","get","getProduct","products","cate","patchValue","onSelectImage","event","push","addedFiles","file_data","FormData","append","uploadImage","secure_url","onRemovem","splice","indexOf","onHandleSubmit","value","updateProduct","fire","position","icon","title","showConfirmButton","timer","navigate","error","alert","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Duong Danh Nam\\Desktop\\thự tập\\FontEnd\\src\\app\\pages\\products-edit\\products-edit.component.ts"],"sourcesContent":["// product-update.component.ts\nimport { Component } from '@angular/core';\nimport { FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ICategory } from 'src/app/interface/category';\nimport { IProduct } from 'src/app/interface/product';\nimport { ProductService } from 'src/app/service/product.service';\nimport Swal from 'sweetalert2';\n\n\n@Component({\n  selector: 'app-product-update',\n  templateUrl: './product-update.component.html',\n  styleUrls: ['./product-update.component.scss']\n})\nexport class ProductUpdateComponent {\n  products!: IProduct;\n  categorys!: any;\n  cate: any\n\n  productAddForm = this.fb.group({\n    name: new FormControl('', Validators.required),\n    price: new FormControl(0, Validators.required),\n    priceSale: new FormControl(0, Validators.required),\n    describe: new FormControl('', Validators.compose([Validators.required, Validators.minLength(10)])),\n    images: new FormControl('', Validators.required),\n    categoryId: new FormControl('', Validators.required),\n    status: new FormControl(true, Validators.required),\n\n  })\n  get checkForm() { return this.productAddForm.controls }\n  constructor(private fb: FormBuilder,\n    private router: ActivatedRoute,\n    private productService: ProductService,\n    private route: Router,\n  ) {\n    this.productService.getCategory().subscribe(response => {\n      console.log(response.data);\n      this.categorys = response.data\n    })\n\n\n\n    this.router.paramMap.subscribe(params => {\n      const _id = params.get('id');\n      this.productService.getProduct(_id).subscribe((response: any) => {\n        console.log(response);\n        this.products = response.data\n        console.log(this.products);\n        this.cate = response.data.categoryId.name\n        this.productAddForm.patchValue({\n          name: response.data.name,\n          price: response.data.price,\n          priceSale: response.data.priceSale,\n          describe: response.data.describe,\n          categoryId: response.data.categoryId,\n          images: response.data.images,\n          status: response.data.status\n        })\n      })\n    });\n\n  }\n\n\n\n\n  onSelectImage(event: any) {\n    this.files.push(...event.addedFiles);\n    const file_data = this.files[0]\n    const data = new FormData();\n    data.append('file', file_data);\n    data.append('upload_preset', 'upload');\n    data.append('cloud_name', 'doa7mkkpq');\n    this.productService.uploadImage(data,\n    ).subscribe(response => {\n      this.url.push(response.secure_url)\n      console.log(this.url);\n    }\n    )\n  }\n\n\n\n  files: any[] = [];\n  url: any = []\n  onRemovem(event: any) {\n    console.log(event);\n    this.files.splice(this.files.indexOf(event), 1);\n\n  }\n\n\n  onHandleSubmit() {\n\n    const products: any = {\n      _id: this.products._id,\n      name: this.productAddForm.value.name || '',\n      price: this.productAddForm.value.price || 0,\n      priceSale: this.productAddForm.value.priceSale || 0,\n      describe: this.productAddForm.value.describe || '',\n      categoryId: this.productAddForm.value.categoryId || '',\n      images: this.url[0] || \"\",\n      status: this.productAddForm.value.status || true\n    };\n\n    console.log(products._id);\n    this.productService.updateProduct(products).subscribe(data => {\n      console.log(data);\n      Swal.fire({\n        position: 'center',\n        icon: 'success',\n        title: 'Update Product success',\n        showConfirmButton: false,\n        timer: 1500\n      })\n      this.route.navigate(['/admin/product'])\n    },\n      (error) => {\n        alert('Cập nhật mục thất bại');\n      });\n\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}