{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nexport let LoginComponent = class LoginComponent {\n  constructor(fb, auth, router) {\n    this.fb = fb;\n    this.auth = auth;\n    this.router = router;\n    this.loginForm = this.fb.group({\n      email: new FormControl('', Validators.compose([Validators.required, Validators.email])),\n      password: new FormControl('', Validators.compose([Validators.required, Validators.minLength(8)]))\n    });\n  }\n  get checkValidate() {\n    return this.loginForm.controls;\n  }\n  onHandleSubmit() {\n    if (this.loginForm.valid) {\n      const loginData = {\n        email: this.loginForm.value.email || '',\n        password: this.loginForm.value.password || ''\n      };\n      this.auth.login(loginData).subscribe(data => {\n        localStorage.setItem('token', data.token);\n        let token = localStorage.getItem('token');\n        if (data.user.role === \"admin\") {\n          this.router.navigate(['/']);\n        } else {\n          this.router.navigate(['/']);\n        }\n      });\n    }\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})], LoginComponent);","map":{"version":3,"names":["Component","FormControl","Validators","LoginComponent","constructor","fb","auth","router","loginForm","group","email","compose","required","password","minLength","checkValidate","controls","onHandleSubmit","valid","loginData","value","login","subscribe","data","localStorage","setItem","token","getItem","user","role","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Duong Danh Nam\\Desktop\\thự tập\\FontEnd\\src\\app\\pages\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { User } from 'src/app/interface/auth';\nimport { AuthService } from 'src/app/service/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent {\n\n\n  loginForm = this.fb.group({\n    email: new FormControl('', Validators.compose([Validators.required, Validators.email])),\n    password: new FormControl('', Validators.compose([Validators.required, Validators.minLength(8)])),\n  });\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthService,\n    private router: Router\n  ) { }\n  get checkValidate() {\n    return this.loginForm.controls\n  }\n\n  onHandleSubmit(){\n    if (this.loginForm.valid) {\n      const loginData: User = {\n        email: this.loginForm.value.email || '',\n        password: this.loginForm.value.password || ''\n      };\n      this.auth.login(loginData).subscribe(\n        (data: any) => {\n          localStorage.setItem('token', data.token);\n          let token = localStorage.getItem('token');\n          if (data.user.role === \"admin\") {\n            this.router.navigate(['/']);\n\n          } else {\n            this.router.navigate(['/'])\n          }\n\n        },\n        \n      );\n    }\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAsBC,WAAW,EAAEC,UAAU,QAAQ,gBAAgB;AAU9D,WAAMC,cAAc,GAApB,MAAMA,cAAc;EAQzBC,YACUC,EAAe,EACfC,IAAiB,EACjBC,MAAc;IAFd,KAAAF,EAAE,GAAFA,EAAE;IACF,KAAAC,IAAI,GAAJA,IAAI;IACJ,KAAAC,MAAM,GAANA,MAAM;IARhB,KAAAC,SAAS,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,IAAIT,WAAW,CAAC,EAAE,EAAEC,UAAU,CAACS,OAAO,CAAC,CAACT,UAAU,CAACU,QAAQ,EAAEV,UAAU,CAACQ,KAAK,CAAC,CAAC,CAAC;MACvFG,QAAQ,EAAE,IAAIZ,WAAW,CAAC,EAAE,EAAEC,UAAU,CAACS,OAAO,CAAC,CAACT,UAAU,CAACU,QAAQ,EAAEV,UAAU,CAACY,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;KACjG,CAAC;EAME;EACJ,IAAIC,aAAaA,CAAA;IACf,OAAO,IAAI,CAACP,SAAS,CAACQ,QAAQ;EAChC;EAEAC,cAAcA,CAAA;IACZ,IAAI,IAAI,CAACT,SAAS,CAACU,KAAK,EAAE;MACxB,MAAMC,SAAS,GAAS;QACtBT,KAAK,EAAE,IAAI,CAACF,SAAS,CAACY,KAAK,CAACV,KAAK,IAAI,EAAE;QACvCG,QAAQ,EAAE,IAAI,CAACL,SAAS,CAACY,KAAK,CAACP,QAAQ,IAAI;OAC5C;MACD,IAAI,CAACP,IAAI,CAACe,KAAK,CAACF,SAAS,CAAC,CAACG,SAAS,CACjCC,IAAS,IAAI;QACZC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,KAAK,CAAC;QACzC,IAAIA,KAAK,GAAGF,YAAY,CAACG,OAAO,CAAC,OAAO,CAAC;QACzC,IAAIJ,IAAI,CAACK,IAAI,CAACC,IAAI,KAAK,OAAO,EAAE;UAC9B,IAAI,CAACtB,MAAM,CAACuB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;SAE5B,MAAM;UACL,IAAI,CAACvB,MAAM,CAACuB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;;MAG/B,CAAC,CAEF;;EAEL;CAED;AAxCY3B,cAAc,GAAA4B,UAAA,EAL1B/B,SAAS,CAAC;EACTgC,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EACW/B,cAAc,CAwC1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}