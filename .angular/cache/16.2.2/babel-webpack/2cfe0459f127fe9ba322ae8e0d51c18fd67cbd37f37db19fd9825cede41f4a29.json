{"ast":null,"code":"var _class;\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ProductsService {\n  constructor(http) {\n    this.http = http;\n    this.API = 'http://localhost:8080/api';\n    this.token = localStorage.getItem('token');\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + this.token\n      })\n    };\n  }\n  getAllProducts() {\n    const url = `${this.API}/products`;\n    return this.http.get(url, this.httpOptions);\n  }\n  getProduct(_id) {\n    const url = `${this.API}/products/${_id}`;\n    return this.http.get(url, this.httpOptions).pipe(switchMap(product => this.getProductsByCategory(product.category).pipe(map(similarProducts => ({\n      ...product,\n      similarProducts\n    })))));\n  }\n  addProduct(products) {\n    const url = `${this.API}/products`;\n    return this.http.post(url, products, this.httpOptions);\n  }\n  getCategory() {\n    const url = `${this.API}/category`;\n    return this.http.get(url, this.httpOptions);\n  }\n  updateProduct(products) {\n    const url = `${this.API}/products/${products._id}`;\n    return this.http.put(url, products, this.httpOptions);\n  }\n  deleteProduct(id) {\n    const url = `${this.API}/products/${id}`;\n    return this.http.delete(url, this.httpOptions);\n  }\n  getProductsByCategory(categoryName) {\n    const url = `${this.API}/products?category=${categoryName}`;\n    return this.http.get(url, this.httpOptions);\n  }\n}\n_class = ProductsService;\n_class.ɵfac = function ProductsService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.HttpClient));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["HttpHeaders","ProductsService","constructor","http","API","token","localStorage","getItem","httpOptions","headers","Authorization","getAllProducts","url","get","getProduct","_id","pipe","switchMap","product","getProductsByCategory","category","map","similarProducts","addProduct","products","post","getCategory","updateProduct","put","deleteProduct","id","delete","categoryName","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Duong Danh Nam\\Desktop\\thự tập\\FontEnd\\src\\app\\service\\products.service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n\nimport { ICategory } from '../interface/category';\nimport { IProducts } from '../interface/products';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductsService {\n\n  private API = 'http://localhost:8080/api';\n  \n\n  token = localStorage.getItem('token')\n  httpOptions = {\n    headers: new HttpHeaders({\n      'Content-Type': 'application/json',\n      Authorization: 'Bearer ' + this.token,\n    }),\n  }\n\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  getAllProducts(): Observable<IProducts[]>{\n    const url = `${this.API}/products`;\n    return this.http.get<IProducts[]>(url,this.httpOptions)\n  }\n\n  getProduct(_id: string | null): Observable<IProducts> {\n    const url = `${this.API}/products/${_id}`;\n    return this.http.get<IProducts>(url, this.httpOptions)\n      .pipe(\n        switchMap((product: IProducts) =>\n          this.getProductsByCategory(product.category).pipe(\n            map((similarProducts: IProducts[]) => ({ ...product, similarProducts }))\n          )\n        )\n      );\n  }\n\n  addProduct(products: IProducts):Observable<IProducts>{\n    const url = `${this.API}/products`;\n    return this.http.post<IProducts>(url,products,this.httpOptions)\n  }\n\n  getCategory(): Observable<ICategory> {\n    const url = `${this.API}/category`;\n    return this.http.get<ICategory>(url,this.httpOptions)\n  }\n\n  updateProduct(products: IProducts): Observable<IProducts> {\n    const url = `${this.API}/products/${products._id}`;\n    return this.http.put<IProducts>(url, products,this.httpOptions);\n  }\n\n  deleteProduct(id: string | null): Observable<IProducts> {\n    const url = `${this.API}/products/${id}`;\n    return this.http.delete<IProducts>(url,this.httpOptions)\n  }\n\n  getProductsByCategory(categoryName: string): Observable<IProducts[]> {\n    const url = `${this.API}/products?category=${categoryName}`;\n    return this.http.get<IProducts[]>(url, this.httpOptions);\n  }\n\n}\n"],"mappings":";AAAA,SAAqBA,WAAW,QAAQ,sBAAsB;;;AAY9D,OAAM,MAAOC,eAAe;EAc1BC,YACUC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAbN,KAAAC,GAAG,GAAG,2BAA2B;IAGzC,KAAAC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACrC,KAAAC,WAAW,GAAG;MACZC,OAAO,EAAE,IAAIT,WAAW,CAAC;QACvB,cAAc,EAAE,kBAAkB;QAClCU,aAAa,EAAE,SAAS,GAAG,IAAI,CAACL;OACjC;KACF;EAKG;EAEJM,cAAcA,CAAA;IACZ,MAAMC,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,WAAW;IAClC,OAAO,IAAI,CAACD,IAAI,CAACU,GAAG,CAAcD,GAAG,EAAC,IAAI,CAACJ,WAAW,CAAC;EACzD;EAEAM,UAAUA,CAACC,GAAkB;IAC3B,MAAMH,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,aAAaW,GAAG,EAAE;IACzC,OAAO,IAAI,CAACZ,IAAI,CAACU,GAAG,CAAYD,GAAG,EAAE,IAAI,CAACJ,WAAW,CAAC,CACnDQ,IAAI,CACHC,SAAS,CAAEC,OAAkB,IAC3B,IAAI,CAACC,qBAAqB,CAACD,OAAO,CAACE,QAAQ,CAAC,CAACJ,IAAI,CAC/CK,GAAG,CAAEC,eAA4B,KAAM;MAAE,GAAGJ,OAAO;MAAEI;IAAe,CAAE,CAAC,CAAC,CACzE,CACF,CACF;EACL;EAEAC,UAAUA,CAACC,QAAmB;IAC5B,MAAMZ,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,WAAW;IAClC,OAAO,IAAI,CAACD,IAAI,CAACsB,IAAI,CAAYb,GAAG,EAACY,QAAQ,EAAC,IAAI,CAAChB,WAAW,CAAC;EACjE;EAEAkB,WAAWA,CAAA;IACT,MAAMd,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,WAAW;IAClC,OAAO,IAAI,CAACD,IAAI,CAACU,GAAG,CAAYD,GAAG,EAAC,IAAI,CAACJ,WAAW,CAAC;EACvD;EAEAmB,aAAaA,CAACH,QAAmB;IAC/B,MAAMZ,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,aAAaoB,QAAQ,CAACT,GAAG,EAAE;IAClD,OAAO,IAAI,CAACZ,IAAI,CAACyB,GAAG,CAAYhB,GAAG,EAAEY,QAAQ,EAAC,IAAI,CAAChB,WAAW,CAAC;EACjE;EAEAqB,aAAaA,CAACC,EAAiB;IAC7B,MAAMlB,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,aAAa0B,EAAE,EAAE;IACxC,OAAO,IAAI,CAAC3B,IAAI,CAAC4B,MAAM,CAAYnB,GAAG,EAAC,IAAI,CAACJ,WAAW,CAAC;EAC1D;EAEAW,qBAAqBA,CAACa,YAAoB;IACxC,MAAMpB,GAAG,GAAG,GAAG,IAAI,CAACR,GAAG,sBAAsB4B,YAAY,EAAE;IAC3D,OAAO,IAAI,CAAC7B,IAAI,CAACU,GAAG,CAAcD,GAAG,EAAE,IAAI,CAACJ,WAAW,CAAC;EAC1D;;SA1DWP,eAAe;;mBAAfA,MAAe,EAAAgC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;;SAAfnC,MAAe;EAAAoC,OAAA,EAAfpC,MAAe,CAAAqC,IAAA;EAAAC,UAAA,EAFd;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}